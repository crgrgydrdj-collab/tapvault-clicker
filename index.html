<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>TapVault</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(180deg, #5b3fd6, #1e1e2f 60%, #b58b2a);
  color: #fff;
  height: 100vh;
  overflow: hidden;
}

.app {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.header {
  padding: 16px;
  font-size: 26px;
  font-weight: 700;
  display: flex;
  justify-content: space-between;
}

.pro-badge {
  background: rgba(0,0,0,.3);
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 14px;
}

.card {
  margin: 16px;
  padding: 20px;
  border-radius: 24px;
  background: linear-gradient(180deg, #2e3470, #1f223a);
}

.star-box {
  display: flex;
  align-items: center;
  font-size: 42px;
  font-weight: 700;
}

.star-box img {
  width: 46px;
  margin-right: 12px;
}

.star-click {
  margin: 20px auto;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background: rgba(255,255,255,.05);
  display: flex;
  align-items: center;
  justify-content: center;
}

.star-click img {
  width: 140px;
}

.energy {
  margin-top: 12px;
  font-size: 14px;
}

.energy-bar {
  margin-top: 6px;
  height: 10px;
  background: rgba(255,255,255,.2);
  border-radius: 10px;
  overflow: hidden;
}

.energy-fill {
  height: 100%;
  background: linear-gradient(90deg, #ffd36a, #ffb300);
  width: 100%;
}

.button {
  margin-top: 18px;
  padding: 16px;
  text-align: center;
  border-radius: 16px;
  background: linear-gradient(180deg, #3b2b14, #1d1407);
  color: #ffd36a;
  font-weight: 600;
}

.tabs {
  margin-top: auto;
  display: flex;
  background: rgba(0,0,0,.4);
  padding: 8px;
}

.tab {
  flex: 1;
  text-align: center;
  padding: 12px;
  border-radius: 16px;
  color: #ccc;
}

.tab.active {
  background: rgba(255,255,255,.15);
  color: #fff;
}

.hidden { display: none; }

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.modal-box {
  background: #1e223a;
  padding: 20px;
  border-radius: 20px;
  width: 80%;
  text-align: center;
}
</style>
</head>

<body>
<div class="app">

  <div class="header">
    TapVault
    <div class="pro-badge">PRO: OFF</div>
  </div>

  <!-- ГЛАВНАЯ -->
  <div class="card screen" id="screen-main">
    <div class="star-box">
      <img src="IMG_0933.webp">
      <span id="stars">0</span>
    </div>

    <div class="star-click" id="tapArea">
      <img src="IMG_0933.webp">
    </div>

    <div class="energy">
      Энергия <span id="energyText">250/250</span>
      <div class="energy-bar">
        <div class="energy-fill" id="energyFill"></div>
      </div>
    </div>

    <div class="button">Обменять 50 000 кликов → ⭐</div>
  </div>

  <!-- PRO -->
  <div class="card screen hidden" id="screen-pro">
    <h3>PRO доступ</h3>
    <p>Чтобы получить промокод — напиши <b>@xarm0</b><br>Цена: <b>150₽</b></p>
    <input placeholder="Ввести промокод" style="width:100%;padding:14px;border-radius:12px;border:none;margin-top:10px;">
    <div class="button">Активировать PRO</div>
    <p style="opacity:.6;margin-top:12px;font-size:13px">
      Антибот-проверка появляется раз в 30–40 секунд.
    </p>
  </div>

  <!-- ОБМЕН -->
  <div class="card screen hidden" id="screen-exchange">
    <h3>Обмен</h3>
    <p>Обмен доступен при наличии 50 000 кликов.</p>
    <div class="button">Отправить заявку на вывод</div>
  </div>

  <!-- ЛИДЕРЫ -->
  <div class="card screen hidden" id="screen-leaders">
    <h3>Лидеры</h3>
    <p>В разработке.</p>
  </div>

  <!-- ТАБЫ -->
  <div class="tabs">
    <div class="tab active" data-tab="main">Главная</div>
    <div class="tab" data-tab="pro">PRO</div>
    <div class="tab" data-tab="exchange">Обмен</div>
    <div class="tab" data-tab="leaders">Лидеры</div>
  </div>

</div>

<!-- КАПЧА -->
<div class="modal hidden" id="captchaModal">
  <div class="modal-box">
    <p>Подтверди, что ты не бот</p>
    <div class="button" id="captchaBtn">Я человек</div>
  </div>
</div>

<script>
const tg = window.Telegram?.WebApp;
if (tg) tg.ready();

let stars = Number(localStorage.getItem('stars') || 0);
let energy = Number(localStorage.getItem('energy') || 250);
let lastTime = Number(localStorage.getItem('lastTime') || Date.now());

const MAX = 250;
const starsEl = document.getElementById('stars');
const energyText = document.getElementById('energyText');
const energyFill = document.getElementById('energyFill');

function restoreEnergy() {
  const now = Date.now();
  const diff = Math.floor((now - lastTime) / 1000);
  energy = Math.min(MAX, energy + diff);
  lastTime = now;
}
restoreEnergy();

function render() {
  starsEl.textContent = stars;
  energyText.textContent = energy + '/' + MAX;
  energyFill.style.width = (energy / MAX * 100) + '%';
}
render();

document.getElementById('tapArea').onclick = () => {
  if (energy <= 0) return;
  stars++;
  energy--;
  render();
};

setInterval(() => {
  localStorage.setItem('stars', stars);
  localStorage.setItem('energy', energy);
  localStorage.setItem('lastTime', lastTime);
}, 1000);

// вкладки
document.querySelectorAll('.tab').forEach(tab => {
  tab.onclick = () => {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
    tab.classList.add('active');
    document.getElementById('screen-' + tab.dataset.tab).classList.remove('hidden');
  };
});
</script>
</body>
</html>
